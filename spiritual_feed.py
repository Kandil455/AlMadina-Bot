"""مجموعة أذكار وآيات وأحاديث لإرسالها دوريًا."""

import random

SPIRITUAL_SNIPPETS = [
    {
        "type": "hadith",
        "title": "فضل الصدق",
        "text": "عن ابن مسعود رضي الله عنه قال: قال رسول الله ﷺ: \"عليكم بالصدق؛ فإن الصدق يهدي إلى البر، وإن البر يهدي إلى الجنة، ولا يزال الرجل يصدق ويتحرى الصدق حتى يكتب عند الله صديقًا...\"",
        "reference": "متفق عليه",
        "explanation": "الصدق مفتاح البر، والحديث يبيّن أثر الصدق في تهذيب النفس وبلوغ منازل الكرامة."
    },
    {
        "type": "hadith",
        "title": "سعة الرحمة",
        "text": "عن أبي هريرة رضي الله عنه قال: قال رسول الله ﷺ: \"إن لله مائة رحمة أنزل منها رحمة واحدة بين الجن والإنس والبهائم والهوام، فبها يتعاطفون... وأخر تسعًا وتسعين رحمة يرحم بها عباده يوم القيامة\"",
        "reference": "صحيح مسلم",
        "explanation": "يبين الحديث مدى رحمة الله الواسعة التي تشمل الخلق في الدنيا والآخرة."
    },
    {
        "type": "hadith",
        "title": "نعمة الوقت",
        "text": "عن ابن عباس رضي الله عنهما قال: قال رسول الله ﷺ: \"نعمتان مغبون فيهما كثير من الناس: الصحة والفراغ\"",
        "reference": "صحيح البخاري",
        "explanation": "دعوة لاستثمار الصحة والفراغ في الطاعات والأعمال النافعة قبل زوالهما."
    },
    {
        "type": "hadith",
        "title": "التفاؤل",
        "text": "قال رسول الله ﷺ: \"تفاءلوا بالخير تجدوه\"",
        "reference": "رواه الطبراني والمعنى صحيح",
        "explanation": "حث على حسن الظن بالله وتوقع الجميل فيقاد القلب إلى النشاط والعمل الإيجابي."
    },
    {
        "type": "hadith",
        "title": "كلمة طيبة",
        "text": "عن أبي هريرة رضي الله عنه قال: قال رسول الله ﷺ: \"والكلمة الطيبة صدقة\"",
        "reference": "صحيح مسلم",
        "explanation": "الكلمة الحسنة لها أثر الصدقات في الأجر وتأليف القلوب."
    },
    {
        "type": "ayah",
        "title": "طمأنينة القلب",
        "text": "﴿أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ﴾",
        "reference": "سورة الرعد (آية 28)",
        "explanation": "ذكر الله هو السكينة الحقيقية للقلب مهما كثرت الهموم."
    },
    {
        "type": "ayah",
        "title": "الرضا بالقضاء",
        "text": "﴿وَعَسَىٰ أَن تَكْرَهُوا شَيْئًا وَهُوَ خَيْرٌ لَّكُمْ﴾",
        "reference": "سورة البقرة (آية 216)",
        "explanation": "التسليم لأقدار الله وعدم الجزع عند المكروه فيه الخير الخفي."
    },
    {
        "type": "ayah",
        "title": "قرب الله لعباده",
        "text": "﴿وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ﴾",
        "reference": "سورة البقرة (آية 186)",
        "explanation": "الله قريب يجيب دعوة الداعي، فلا تردد في رفع حاجتك إليه."
    },
    {
        "type": "ayah",
        "title": "التوكل",
        "text": "﴿وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ﴾",
        "reference": "سورة الطلاق (آية 3)",
        "explanation": "التوكل الحقيقي يغنيك عن كل ما سواه، فالله يكفي المتوكلين."
    },
    {
        "type": "ayah",
        "title": "الاستغفار",
        "text": "﴿فَقُلْتُ اسْتَغْفِرُوا رَبَّكُمْ إِنَّهُ كَانَ غَفَّارًا * يُرْسِلِ السَّمَاءَ عَلَيْكُم مِّدْرَارًا﴾",
        "reference": "سورة نوح (آية 10-11)",
        "explanation": "الاستغفار مفتاح للرزق والرحمة والفرج."
    },
    {
        "type": "hadith",
        "title": "رحمة الخلق",
        "text": "قال رسول الله ﷺ: \"الراحمون يرحمهم الرحمن، ارحموا من في الأرض يرحمكم من في السماء\"",
        "reference": "سنن الترمذي وصححه الألباني",
        "explanation": "من بادر الناس بالرحمة نال رحمة الله، وهي دعوة إنسانية عامة."
    },
    {
        "type": "hadith",
        "title": "حب الخير",
        "text": "قال رسول الله ﷺ: \"لا يؤمن أحدكم حتى يحب لأخيه ما يحب لنفسه\"",
        "reference": "متفق عليه",
        "explanation": "الإيمان الحقيقي يُترجم بمحبة الخير للآخرين كما نحبه لأنفسنا."
    },
]


def get_random_snippets(count: int = 2) -> list[dict]:
    """Return a selection of snippets, preferring تنويع بين حديث وآية."""
    count = max(1, min(count, len(SPIRITUAL_SNIPPETS)))
    pool = SPIRITUAL_SNIPPETS[:]
    random.shuffle(pool)
    selected = []

    hadiths = [entry for entry in pool if entry['type'] == 'hadith']
    ayat = [entry for entry in pool if entry['type'] == 'ayah']

    if hadiths:
        selected.append(random.choice(hadiths))
    if ayat:
        selected.append(random.choice(ayat))

    for entry in pool:
        if len(selected) >= count:
            break
        if entry not in selected:
            selected.append(entry)

    return selected[:count]
